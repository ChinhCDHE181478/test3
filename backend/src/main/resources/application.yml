spring:
  application:
    name: backend

  datasource:
    url: jdbc:postgresql://ep-cold-math-a1jx3m56-pooler.ap-southeast-1.aws.neon.tech/neondb?user=neondb_owner&password=npg_SU3FAZu9bMei&sslmode=require&channelBinding=require
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    defer-datasource-initialization: true
  sql:
    init:
      mode: always

  servlet:
    multipart:
      enabled: true
      max-file-size: 5MB
      max-request-size: 10MB

#  data:
#    redis:
#      host: "${REDIS_HOST}"
#      port: "${REDIS_PORT}"
#      timeout: 60000

  mail:
    host: smtp.gmail.com
    port: 587
    username: "${MAIL}"
    password: "${MAILPASS}"
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true


server:
  port: 8080
  servlet:
    context-path: "/api/v1"

logging:
  level:
    org.hibernate.SQL: debug
    org.hibernate.type.descriptor.sql: trace

jwt:
  signerKey: "${SIGNER_KEY}"
  refreshSignerKey: "${REFRESH_SIGNER_KEY}"
  validTime: 259200 #second
  refreshTime: 259200 #second

frontend:
  url: "${FRONTEND_URL}"

rapid-api:
  url: "${RAPIDAPI_BOOKINGCOM_URL}"
  host: "${X_RAPIDAPI_HOST}"
  key: "${X_RAPIDAPI_KEY}"

outbound:
  identity:
    google:
      token-url: ${OUTBOUND_IDENTITY_GOOGLE_TOKEN_URL}
      userinfo-url: ${OUTBOUND_IDENTITY_GOOGLE_USERINFO_URL}
      client-id: "${OUTBOUND_IDENTITY_GOOGLE_CLIENT_ID}"
      client-secret: "${OUTBOUND_IDENTITY_GOOGLE_CLIENT_SECRET}"
      redirect-uri: "${OUTBOUND_IDENTITY_GOOGLE_REDIRECT_URI}"
      grant-type: "${OUTBOUND_IDENTITY_GOOGLE_GRANT_TYPE}"

    facebook:
      token-url: https://graph.facebook.com/v18.0/oauth/access_token
      userinfo-url: https://graph.facebook.com/me?fields=id,name,email
      client-id: "YOUR_FACEBOOK_CLIENT_ID"
      client-secret: "YOUR_FACEBOOK_CLIENT_SECRET"
      redirect-uri:
      grant-type: "authorization_code"

resilience4j:
  circuitbreaker:
    instances:
      rapidApiCB:
        registerHealthIndicator: true
        slidingWindowSize: 20         # l·∫•y m·∫´u 20 request g·∫ßn nh·∫•t
        failureRateThreshold: 50      # n·∫øu 50% fail -> m·ªü circuit
        waitDurationInOpenState: 10s  # sau 10s th·ª≠ l·∫°i
        permittedNumberOfCallsInHalfOpenState: 3

  retry:
    instances:
      rapidApiRetry:
        maxAttempts: 3
        waitDuration: 500ms

  thread-pool-bulkhead:
    instances:
      rapidApiThreadPoolBulkhead:     # üëà ƒë·∫∑t t√™n instance
        maxThreadPoolSize: 50       # s·ªë thread t·ªëi ƒëa x·ª≠ l√Ω song song
        coreThreadPoolSize: 10         # thread core
        queueCapacity: 50             # cho ph√©p t·ªëi ƒëa 50 request ch·ªù trong queue

# Swagger/OpenAPI Configuration
springdoc:
  api-docs:
    path: /api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    tags-sorter: alpha
    operations-sorter: alpha
    display-request-duration: true
    doc-expansion: none
  show-actuator: false
# PayOS Configuration
payos:
  client-id: "${PAYOS_CLIENT_ID}"
  api-key: "${PAYOS_API_KEY}"
  checksum-key: "${PAYOS_CHECKSUM_KEY}"
  webhook:
    url: "${PAYOS_WEBHOOK_URL}"
  return:
    url: "${PAYOS_RETURN_URL}"
  cancel:
    url: "${PAYOS_CANCEL_URL}"

admin:
  email: "${ADMIN_EMAIL}"
